language: node_js
node_js: lts/*
addons:
  chrome: stable
before_install:
  - npm install -g @lhci/cli@0.3.x
  - npm install -g lighthouse
  - npm install -g lighthouse-plugin-field-performance
script:
  - export LHCI_BUILD_CONTEXT__CURRENT_HASH=$(head -n 4096 /dev/urandom | openssl sha1 | sed 's/(stdin)=//g' | fold -w 8 | head -n 1)
  - export LHCI_BUILD_CONTEXT__COMMIT_TIME=$(date +%Y-%m-%dT%H:%M:%S%z)
  - export LHCI_BUILD_CONTEXT__CURRENT_BRANCH=master
  - export LHCI_BUILD_CONTEXT__COMMIT_MESSAGE="Periodic run"
  - export LHCI_BUILD_CONTEXT__AUTHOR="Liccy Fuentes <liccy.fuentes@daily-harvest.com>"
  - export LHCI_BUILD_CONTEXT__AVATAR_URL="https://picsum.photos/id/870/200/200"
  - lhci autorun --upload.token="$LHCI_UPLOAD__TOKEN" # run lighthouse CI
env:
  global:
    - secure: "Al9JfI7aqEM1jv02fwhfFNJPXTK5lIdhjDsdqU1lH9SwvbRqiKdecnYBW5qvvdPO/4g0rzLEBmg4ubiD/9zF6DCfizWNNOYf2iKxxNaRFzfmUudj63tr50kIJtfxD9ajMmJMi5qGclUhQiscupyoBQ4ujHhGmKCFiH/IH1O37ci3VWmzdn4eAHxEe4Syz1e1zrh4qYiSHd8F0OaJyyORpHhxWzi6WkLGvxKnvmp0mO7bfyzUurQJ8WNhu9hiCRgZzivU0RJVXNooXXLaOEuVY1mFBMiCgfpiqANlFp+E5NhQnmvQLYK0TbS4R1kGC7y4zXICxoaSsfhAqSPsJvC9Un3LwxaZHsmmSN2U1pD1Uv9TttILR1SQrLGIr4deymMZnBQKOCGrkeoCynuy30r+q/IZ3W7Sn03zH3+uX//KsqnWfGjBhjYl/1uyny0vO047ahJsji2VfuuO2qIqgHmRmbtX1svKYOpaYcrYNS2tpZDwn1RL3mfGec2pEdR+bT9IG8jZl9AyLT74VlpPhOH8AZm2aLL+5gdDq0TFJRSDsbSrZEuRenXifhyZWhnSwpkVKRs9zsgQZsJyTaIMXw3z8Q+rimDJLVX1dPJHjAVsZJLUjCDivurwwJmjVuRM6CrRL0bYso5ZjD+cVSY4gR6+k8w8/T/6ez+/sBwa5qn4ta4="
