language: node_js
node_js: lts/*
addons:
  chrome: stable
before_install:
  - npm install -g @lhci/cli@0.3.x
  - npm install -g lighthouse
  - npm install -g lighthouse-plugin-field-performance
script:
  - export LHCI_BUILD_CONTEXT__CURRENT_HASH=$(head -n 4096 /dev/urandom | openssl sha1 | sed 's/(stdin)=//g' | fold -w 8 | head -n 1)
  - export LHCI_BUILD_CONTEXT__COMMIT_TIME=$(date +%Y-%m-%dT%H:%M:%S%z)
  - export LHCI_BUILD_CONTEXT__CURRENT_BRANCH=master
  - export LHCI_BUILD_CONTEXT__COMMIT_MESSAGE="Periodic run"
  - export LHCI_BUILD_CONTEXT__AUTHOR="Liccy Fuentes <liccy.fuentes@daily-harvest.com>"
  - export LHCI_BUILD_CONTEXT__AVATAR_URL="https://picsum.photos/id/870/200/200"
  - lhci autorun --upload.token="$LHCI_UPLOAD__TOKEN" # run lighthouse CI
env:
  global:
    - secure: "ZTV/dZI45XkIfxGmd7BhB+vrX1NMbjwGMJtHNIgAsC4OQF+BkNk/sdIN2fX2ip+dkSA/MJ/tZXzsPDjofcqoJY4fKz9NAbyRDCBlAMdu/+NsvoSfnzbDvEt6JE6Q/TUBy0f4p4jGFsSRQQ+Cw3QKYqc3NYA8LisyL7P7zZUft5YKw8lJk3+GgRzn/44uY6T8FeNfyhrnsnYymA4Q+hQdmKoST5iFwSPTYCzLLezuU+loR23G5pWoP8h6TxuxHbcS9aMCLGSQt/KhPRCZ6ldZ2rv3BWyx45QJHBvCJ+HGzdPBf40TM7QurAc1SCi97jbh7tqhc3GzFo4ZD3anj5JZ2xFWQ51XfnsrL8/04unrJAXmzWcZ8JaU15XoUi4FAbd73cIKT8dIJKgJ0L0nF4Us2kqJGNClnxvdnTw16U7INYee8Vl5E8JM+Fr8iBlP3GnZJdMqmZNDn+JOnZkxdgP9WsKRIgyT+HiIfj/c2/Vnvtxy0wmdckQoAEHY5tvHXH8T8ALNF9Re3L66f7PdRjnT/wGR0aMvcjw1lsyyZJY99ZzU8TI+xUcCYBpjzGCwDElP446jVVoSgD1LdTFWHZE/GM85CUuwep30R/W/+1qyNjbKYaddppdpKUtEysT8ApKlFe93lUsXFf9zeUjxfer5aXkCRBhRgJv5cltN3y5SMpQ="