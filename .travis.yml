language: node_js
node_js: lts/*
addons:
  chrome: stable
before_install:
  - npm install -g @lhci/cli@0.3.x
  - npm install -g lighthouse
  - npm install -g lighthouse-plugin-field-performance
script:
  - export LHCI_BUILD_CONTEXT__CURRENT_HASH=$(head -n 4096 /dev/urandom | openssl sha1 | sed 's/(stdin)=//g' | fold -w 8 | head -n 1)
  - export LHCI_BUILD_CONTEXT__COMMIT_TIME=$(date +%Y-%m-%dT%H:%M:%S%z)
  - export LHCI_BUILD_CONTEXT__CURRENT_BRANCH=master
  - export LHCI_BUILD_CONTEXT__COMMIT_MESSAGE="Periodic run"
  - export LHCI_BUILD_CONTEXT__AUTHOR="Liccy Fuentes <liccy.fuentes@daily-harvest.com>"
  - export LHCI_BUILD_CONTEXT__AVATAR_URL="https://picsum.photos/id/870/200/200"
  - lhci autorun --upload.token="$LHCI_UPLOAD__TOKEN" # run lighthouse CI
env:
  global: 
    - secure: "rNcAm1cRJu04kSZjiIeRZ1Aum6yEOlDBEYfTrhpIL0KwTTvZSsMKmgEhuGHUFhmZNF1vYZC6KHmQcLGK6qPqz5Il7B3dyJSHmdcfKW5pLLYTVPfebotMbrsCoI/zVft7IORUXF3dXuGF+BhoGye5gCK1mZsXZI+gdINO9WjR4F8UzrFJmG44zjea/6wf+YkwxIwrKLWniUNJfXef0ooUN1peGX24jGjNHMC7Apw85J5RIFkYwE3YzOjtehXQptqZmUCanNim1kbzRYcmlyGliaXAzk7WbcR9yvnaMofUgBZTzX2kuhk6aH2JOzANP6y+kB+0F8/0UQZgtmV8zUpQxoP35dJXanLM42J+QhVrPHAzsTVv7laTfGOqd1t6eHy/Pmn0Jm8PrgDzhewaVQwwiTMb0DeWeMfk06O7KLMNgw+WxmDgj9Flbhu/XHc6WAqWaDwlSVg6bxZkydohPOhcZ0zfNUmMwIbSY1/LoFxePjLaD2vHaCv94lvmQr/jC6mzSXlAgGoMYA4BT6icQj+GnvqbxKsW/sLczKixxN2PmXTBwSrPnOPdsDHRfh4BSa7tHYAqo2mV08w2mtF2fPZGA7QYdeed3ENCJG7hZ+1HVkb/tcY6z3tkHlFY7IKh6nKhjiWKDwET/C4n1nxVYFFvMGxWU5ybeVqDgiSW5cH+CgQ="
    