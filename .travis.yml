language: node_js
node_js: lts/*
addons:
  chrome: stable
before_install:
  - npm install -g @lhci/cli@0.3.x
  - npm install -g lighthouse
  - npm install -g lighthouse-plugin-field-performance
script:
  - export LHCI_BUILD_CONTEXT__CURRENT_HASH=$(head -n 4096 /dev/urandom | openssl sha1 | sed 's/(stdin)=//g' | fold -w 8 | head -n 1)
  - export LHCI_BUILD_CONTEXT__COMMIT_TIME=$(date +%Y-%m-%dT%H:%M:%S%z)
  - export LHCI_BUILD_CONTEXT__CURRENT_BRANCH=master
  - export LHCI_BUILD_CONTEXT__COMMIT_MESSAGE="Periodic run"
  - export LHCI_BUILD_CONTEXT__AUTHOR="Liccy Fuentes <liccy.fuentes@daily-harvest.com>"
  - export LHCI_BUILD_CONTEXT__AVATAR_URL="https://picsum.photos/id/870/200/200"
  - lhci autorun --upload.token="$LHCI_UPLOAD__TOKEN" # run lighthouse CI
env:
  global:
    - secure: "qdUUz8KpMVzauKxpREQ2fsh2O1f658oiJD4SxTUvYoejTLMvLl7KskkfOkrDPF2CFiUY2uCkFuqNBiGH+ZMtDZMg6cG5AG31iuSxP0nMkFaLFgS3/Uvm69cO8cMIUc+gxSDmeWE8oDk2nOjZv9h1Z4yldC1VE73P2sVTiZQqXVkwL51zP+cTfHi9wOkb5Wu0Q29fLALfz8/y9KHJaABA8izqO5QxI1ECBl4HFlS7tMw09kUFl8fMGYGkpMJuURjorKniPhHirrs8wxGgqhdCEYUptfhRYNzu8h7zUtdyJjoJy53Xpi1L5X7yx87b+VqBmsANmon9dfmS2CrhZWh30OqsaTRGsrIvgDg9fDpew4AokmmlTD4oWjdfpQktQku2W0vEZbavMNa8UJf1nkOh7ssEHO1aGu4fHOczrKHLw1cNrr0X8Rqw1rU3llBpswAzCYmUeQGd8vgzqR8YlOcU1grQADJuvzC5++3tPQf6PAeZNsNaKZYMZ9SPXVKnK6rGArM/CZroeg9RUNYfPZ/Y4c0PxzABewoWzJW0ArNjvMWjr2VXKcGFtIOpXCfd/581Me6PcAdgXFifyySi3qZ1/wl3T0t46jkvx1nnFxosOHIbLUNIJjInMatYya+VtXQaeD/VJ6E2hb4w/zP2ZQevEnpDvHJBduWb5/hLE7AHqHw="